<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/modal.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css">
  <title>Document</title>
</head>


<body id="body-pd">
  <header class="header bg-light bg-gradient" id="header">
    <div class="header_toggle"> <i class='bx bx-menu' id="header-toggle"></i> </div>
    <div class="header_img"> <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3.webp"
        alt=""> </div>
  </header>
  <div class="l-navbar" id="nav-bar">
    <nav class="nav">
      <%- include('../partials/hrNavBar.ejs')  %>
    </nav>
  </div>
  <!--Container Main start-->
  <div class="row">
    <div style="height:717px; overflow: auto">
      <% if(hasLeave === 1){ %>
      
         
          <% for(var i = 0;i < leaves.length;i++){ %>
          <!-- <tr>
              <td><%= employees[i].name %></td>
              <td><%= leaves[i].title %></td>
              <td><%= leaves[i].type %></td>
              <td><%= moment(leaves[i].appliedDate).format('MMMM Do YYYY') %></td>
              <td><%= leaves[i].period %></td>
              <td><%= leaves[i].adminResponse %></td>
              <td>
                  <form method="get"
                        action="/admin/respond-application/<%= leaves[i]._id %>/<%= employees[i]._id %>">
                      <button type="submit"><i class="fa fa-reply fa-lg" title="Responsd"
                                               aria-hidden="true"></i></button>
                  </form>
              </td>
          </tr> -->
          <div class="col">
            <div class="card">
              <div class="card-body">
                <h4 class="card-title">Name: <%= employees[i].firstname %> <%= employees[i].lastname %></h4>
                <h6 class="card-subtitle mb-2 text-muted">EmpID:<%= employees[i].empid %></h6>
                <h6>Email : <%= employees[i].email %> </h6>
                <h6>Phone no : <%= employees[i].contactNumber %></h6>
                <h6>ManagerName : <%= employees[i].manager %></h6>
                <h6>ManagerEmail :<%= employees[i].ManagerEmail %></h6>
                <h6>Day :<%= leaves[i].Day %></h6> 
                <h6>Type : <%= leaves[i].type %></h6>
                <h6>To : <%= leaves[i].endDate %></h6>
                <h6>From : <%= leaves[i].startDate %></h6>
                <p class="card-text">
                  <%= leaves[i].comment %>
                </p>
                <div class="d-flex justify-content-end ">
                  
                  
                  <button data-bs-toggle="modal" class="btn btn-danger m-1 delete-button" id="<%=leaves[i]._id %>" data-bs-target="#myModal1" >Respond</button>
                  
                </div>
              </div>
            </div>
          </div>
          <% } %>
          
      <% }else{ %>
      <p>Leave Applications not found</p>
      <% } %>
  </div>
  </div>
  <!--Container Main end-->

  <script src="/javascript/app.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    var employeeID;
    $(document).ready(function () {
       

      $(document).on("click", ".delete-button", function () {
            employeeId = (this.id);
            document.getElementById("modal-delete-form").action ="/hr/delete-req/" + employeeId;

        });

    });
</script>

</body>
<div id="myModal1" class="modal fade" role="dialog">
  <div class="modal-dialog">
      <form id="modal-delete-form" method="post" action="">
          <!-- Modal content-->
          <div class="modal-content">
              <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">close</button>
                  <h2 class="modal-title">Delete Employee</h2>
                  <!--<h3 class="modal-title"><label id="name"></label></h3>
                  <h4 class="modal-title"><label id="email"></label></h4>-->
              </div>
              <div class="modal-body">
                  <p>Are you sure you want to delete this Request.</p>
              </div>
              <div class="modal-footer">
                  <button type="submit" class="btn btn-default">Reject</button>
                  <button type="submit" class="btn btn-default">Accept</button>
              </div>
          </div>
      </form>
  </div>
</div>
</html>